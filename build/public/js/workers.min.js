"use strict";var posList=document.querySelector(".collection"),delAction="/Workers/deleteWorker/",showAction="/Workers/echoWorkers/",tableHeader=document.getElementById("tbl-header").innerHTML,showParams="",sortNameBtn="",sortSnameBtn="",sortPosBtn="",sortSalBtn="";function viewPosition(e){var t=document.getElementById("upd-name"),n=document.getElementById("upd-sur-name"),a=document.getElementById("upd-pos"),s=document.getElementById("upd-slr"),o=document.getElementById("upd-desc"),d=document.getElementById("upd-id"),r=urlRoot+"/Workers/echoWorker/"+e,u=new XMLHttpRequest;u.open("GET",r,!0),u.onreadystatechange=function(){if(4==u.readyState&&200==u.status){var e=JSON.parse(u.responseText);t.value=e.name,n.value=e.surname,a.value=e.position_id,s.value=e.salary,o.value=e.Characteristics,d.value=e.id}},u.send(r)}function addWorker(){var e=document.getElementById("wrkr-name"),t=document.getElementById("wrkr-sur-name"),n=document.getElementById("wrkr-pos"),a=document.getElementById("wrkr-slr"),s=document.getElementById("wrkr-desc"),o=urlRoot+"/Workers/addWorker/"+e.value+"/"+t.value+"/\n  "+n.value+"/"+a.value+"/"+s.value;ajaxGet(o)}function updateWorker(){var e=document.getElementById("upd-id").value,t=document.getElementById("upd-name").value,n=document.getElementById("upd-sur-name").value,a=document.getElementById("upd-pos").value,s=document.getElementById("upd-slr").value,o=document.getElementById("upd-desc").value,d=urlRoot+"/Workers/updateWorker/"+e+"/"+t+"/"+n+"/"+a+"/"+s+"/"+o;ajaxGet(d)}function SortButtonsStatus(e,t){document.getElementById("tbl-header").innerHTML=tableHeader;var n="",a="";switch("DESC"==e?(n="fa fa-caret-down",a="btn-info"):(n="fa fa-caret-up",a="btn-warning"),t){case"name":document.getElementById("name-btn").innerHTML='Имя <button class="btn '+a+' btn-sm" onclick="sort(\'name\')">\n    <i class="'+n+'"></i></button>';break;case"sname":document.getElementById("sur-name-btn").innerHTML='Фамилия <button class="btn '+a+' btn-sm" onclick="sort(\'sname\')">\n     <i class="'+n+'"></i></button>';break;case"pos":document.getElementById("pos-btn").innerHTML='Должность <button class="btn '+a+' btn-sm" onclick="sort(\'pos\')">\n    <i class="'+n+'"></i></button>';break;case"sal":document.getElementById("salary-btn").innerHTML='З/п <button class="btn '+a+' btn-sm" onclick="sort(\'sal\')">\n    <i class="'+n+'"></i></button>'}}function btnSwitch(e){switch(e){case"":return"DESC";case"DESC":return"ASC";case"ASC":return"DESC"}}function sort(e){switch(e){case"name":SortButtonsStatus(sortNameBtn=btnSwitch(sortNameBtn),e),showParams=sortNameBtn+"/name";break;case"sname":SortButtonsStatus(sortSnameBtn=btnSwitch(sortSnameBtn),"sname"),showParams=sortSnameBtn+"/surname";break;case"pos":SortButtonsStatus(sortPosBtn=btnSwitch(sortPosBtn),"pos"),showParams=sortPosBtn+"/position.pos_name";break;case"sal":SortButtonsStatus(sortSalBtn=btnSwitch(sortSalBtn),"sal"),showParams=sortSalBtn+"/salary"}showPositions()}function allFieldsOk(e){return!!(checked(e[0],lettersOnlyPattern)&&checked(e[1],lettersOnlyPattern)&&checked(e[2],moneyPattern))}document.getElementById("wrkr-name").addEventListener("keyup",function(e){checkOk("add-btn","add-info",addFieldNames)}),document.getElementById("wrkr-sur-name").addEventListener("keyup",function(e){checkOk("add-btn","add-info",addFieldNames)}),document.getElementById("wrkr-slr").addEventListener("keyup",function(e){checkOk("add-btn","add-info",addFieldNames)}),document.getElementById("upd-name").addEventListener("keyup",function(e){checkOk("upd-btn","upd-info",updFieldNames)}),document.getElementById("upd-sur-name").addEventListener("keyup",function(e){checkOk("upd-btn","upd-info",updFieldNames)}),document.getElementById("upd-slr").addEventListener("keyup",function(e){checkOk("upd-btn","upd-info",updFieldNames)});