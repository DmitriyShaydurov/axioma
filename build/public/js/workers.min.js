"use strict";var posList=document.querySelector(".collection"),delAction="/Workers/deleteWorker/",showAction="/Workers/echoWorkers/",tableHeader=document.getElementById("tbl-header").innerHTML,showParams="",sortNameBtn="",sortSnameBtn="",sortPosBtn="",sortSalBtn="";function viewPosition(e){var t=document.getElementById("upd-name"),n=document.getElementById("upd-sur-name"),o=document.getElementById("upd-pos"),a=document.getElementById("upd-slr"),s=document.getElementById("upd-desc"),r=document.getElementById("upd-id"),d=urlRoot+"/Workers/echoWorker/"+e,u=new XMLHttpRequest;u.open("GET",d,!0),u.onreadystatechange=function(){if(4==u.readyState&&200==u.status){var e=JSON.parse(u.responseText);t.value=e.name,n.value=e.surname,o.value=e.position_id,a.value=e.salary,s.value=e.Characteristics,r.value=e.id}},u.send(d)}function addWorker(){var e=document.getElementById("wrkr-name"),t=document.getElementById("wrkr-sur-name"),n=document.getElementById("wrkr-pos"),o=document.getElementById("wrkr-slr"),a=document.getElementById("wrkr-desc"),s=urlRoot+"/Workers/addWorker/"+e.value+"/"+t.value+"/\n  "+n.value+"/"+o.value+"/"+a.value;ajaxGet(s)}function updateWorker(){var e=document.getElementById("upd-id").value,t=document.getElementById("upd-name").value,n=document.getElementById("upd-sur-name").value,o=document.getElementById("upd-pos").value,a=document.getElementById("upd-slr").value,s=document.getElementById("upd-desc").value,r=urlRoot+"/Workers/updateWorker/"+e+"/"+t+"/"+n+"/"+o+"/"+a+"/"+s;ajaxGet(r)}function SortButtonsStatus(e,t){document.getElementById("tbl-header").innerHTML=tableHeader;var n="",o="";switch("DESC"==e?(n="fa fa-caret-down",o="btn-info"):(n="fa fa-caret-up",o="btn-warning"),t){case"name":document.getElementById("name-btn").innerHTML='Имя <button class="btn '+o+' btn-sm" onclick="sort(\'name\')">\n    <i class="'+n+'"></i></button>';break;case"sname":document.getElementById("sur-name-btn").innerHTML='Фамилия <button class="btn '+o+' btn-sm" onclick="sort(\'sname\')">\n     <i class="'+n+'"></i></button>';break;case"pos":document.getElementById("pos-btn").innerHTML='Должность <button class="btn '+o+' btn-sm" onclick="sort(\'pos\')">\n    <i class="'+n+'"></i></button>';break;case"sal":document.getElementById("salary-btn").innerHTML='З/п <button class="btn '+o+' btn-sm" onclick="sort(\'sal\')">\n    <i class="'+n+'"></i></button>'}}function btnSwitch(e){switch(e){case"":return"DESC";case"DESC":return"ASC";case"ASC":return"DESC"}}function sort(e){switch(e){case"name":SortButtonsStatus(sortNameBtn=btnSwitch(sortNameBtn),e),showParams=sortNameBtn+"/name";break;case"sname":SortButtonsStatus(sortSnameBtn=btnSwitch(sortSnameBtn),"sname"),showParams=sortSnameBtn+"/surname";break;case"pos":SortButtonsStatus(sortPosBtn=btnSwitch(sortPosBtn),"pos"),showParams=sortPosBtn+"/position.pos_name";break;case"sal":SortButtonsStatus(sortSalBtn=btnSwitch(sortSalBtn),"sal"),showParams=sortSalBtn+"/salary"}showPositions()}function allAddFieldsOk(){return checked("wrkr-name",lettersOnlyPattern)&&checked("wrkr-sur-name",lettersOnlyPattern)&&checked("wrkr-slr",moneyPattern)?(console.log("true"),!0):(console.log("false"),!1)}function allEditFieldsOk(){return checked("upd-name",lettersOnlyPattern)&&checked("upd-sur-name",lettersOnlyPattern)&&checked("upd-slr",moneyPattern)?(console.log("true"),!0):(console.log("false"),!1)}document.getElementById("wrkr-name").addEventListener("keyup",function(e){checkOk("add-btn","add-info","add")}),document.getElementById("wrkr-sur-name").addEventListener("keyup",function(e){checkOk("add-btn","add-info","add")}),document.getElementById("wrkr-slr").addEventListener("keyup",function(e){checkOk("add-btn","add-info","add")}),document.getElementById("upd-name").addEventListener("keyup",function(e){console.log("name"),checkOk("upd-btn","upd-info","edit")}),document.getElementById("upd-sur-name").addEventListener("keyup",function(e){checkOk("upd-btn","upd-info","edit")}),document.getElementById("upd-slr").addEventListener("keyup",function(e){checkOk("upd-btn","upd-info","edit")});